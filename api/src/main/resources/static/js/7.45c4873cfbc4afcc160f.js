webpackJsonp([7],{"7zKp":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("XF1/"),n={components:{UserTable:a("Jxlu").a},props:{id:Number},mounted:function(){this.loadUserList()},data:function(){return{loading:!1,users:[],total:0,pageSize:10,curPage:1}},methods:{loadUserList:function(){var e=this;this.api.sysuser.getBelong(this.id,this.curPage,this.pageSize).commonThen(function(t,a){t?(e.users=a.data,e.total=a.total):e.$message.error(a),e.loading=!1})},handleSizeChange:function(e){this.pageSize=e,this.loadUserList()},handleCurrentChange:function(e){this.curPage=e,this.loadUserList()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("user-table",{attrs:{"user-list":e.users,loading:e.loading}}),e._v(" "),a("el-pagination",{staticClass:"fl",staticStyle:{margin:"10px"},attrs:{"current-page":e.curPage,"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.curPage=t},"update:current-page":function(t){e.curPage=t}}})],1)},staticRenderFns:[]};var i=a("VU/8")(n,l,!1,function(e){a("rEl8")},"data-v-12cd19e2",null).exports,o=a("jd+X"),r={props:{id:{required:!0,type:String}},components:{Upload:o.a,BottomButtonDialog:s.a,UserList:i},data:function(){return{uploadDialogVisible:!1,excelUploadAction:this.api.baseURL+"/sysuser/belong",modelAction:this.api.baseURL+"/resource/template/phone",excludes:[],mode:0,lastMode:0}},computed:{params:function(){return{mode:this.mode,agentId:this.id}},computedExcludes:function(){return this.excludes.reduce(function(e,t){return null==e?t:e+","+t},null)}},methods:{clearLast:function(){this.excludes=[],this.lastMode=this.mode},uploadRelation:function(e){e.success?(this.uploadDialogVisible=!1,this.$message("导入成功"),e.data&&(this.excludes=e.data)):this.$message.error(e.msg)},showImportDialog:function(e){this.mode=e,this.uploadDialogVisible=!0}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticStyle:{"margin-top":"20px","margin-left":"40px"}},[a("el-col",[a("el-button",{attrs:{type:"primary mini"},on:{click:function(t){return e.showImportDialog(0)}}},[e._v("覆盖导入")]),e._v(" "),a("el-button",{attrs:{type:"primary mini"},on:{click:function(t){return e.showImportDialog(1)}}},[e._v("忽略导入")])],1)],1),e._v(" "),a("p",{staticClass:"font-sm text-info",staticStyle:{"margin-left":"40px"}},[e._v("若覆盖导入，则有其他经理关联强制解除，关联到当前经理")]),e._v(" "),a("user-list",{staticStyle:{padding:"10px 40px"},attrs:{id:parseInt(e.id)}}),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.excludes&&e.excludes.length>0,expression:"excludes && excludes.length > 0"}],staticStyle:{margin:"20px 40px"}},[a("el-col",{staticClass:"warn-title"},[0==e.lastMode?a("span",[e._v("以下为导入覆盖的记录:")]):e._e(),e._v(" "),1==e.lastMode?a("span",[e._v("以下是导入失败的记录(已与其他经理关联):")]):e._e()]),e._v(" "),a("el-input",{attrs:{type:"textarea",value:e.computedExcludes}})],1),e._v(" "),a("bottom-button-dialog",{attrs:{visible:e.uploadDialogVisible,"bottom-visible":!1},on:{"update:visible":function(t){e.uploadDialogVisible=t}}},[a("template",{slot:"title"},[a("h2",[e._v("用户经理关系导入")])]),e._v(" "),[a("div",{attrs:{align:"center"}},[a("upload",{attrs:{action:e.excelUploadAction,"model-action":e.modelAction,"on-success":e.uploadRelation,"on-progress":e.clearLast,data:e.params}})],1)]],2)],1)},staticRenderFns:[]};var c=a("VU/8")(r,u,!1,function(e){a("YWFn")},"data-v-e816b148",null);t.default=c.exports},Jxlu:function(e,t,a){"use strict";var s={props:{loading:{type:Boolean,default:!1},selectable:Boolean,userList:{type:Array}},methods:{onSelectChange:function(e,t){this.$emit("select",e,t)}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"user-table",attrs:{data:e.userList},on:{select:e.onSelectChange}},[e.selectable?a("el-table-column",{attrs:{selectable:!0}}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"头像",width:"120"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("el-image",{staticClass:"headImg",attrs:{fit:"cover",src:t.headImg}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"昵称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"240"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户标签","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return e._l(s.tags,function(t){return a("el-tag",{key:t.id,staticStyle:{margin:"5px"}},[e._v("\n          "+e._s(t.name)+"\n        ")])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"订阅时间",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e._f("formatTimeInMillis")(s.subscribeTime)))])]}}])}),e._v(" "),e._t("tail")],2)],1)},staticRenderFns:[]};var l=a("VU/8")(s,n,!1,function(e){a("O2kQ")},"data-v-12d9e60d",null);t.a=l.exports},O2kQ:function(e,t){},YWFn:function(e,t){},rEl8:function(e,t){}});
//# sourceMappingURL=7.45c4873cfbc4afcc160f.js.map