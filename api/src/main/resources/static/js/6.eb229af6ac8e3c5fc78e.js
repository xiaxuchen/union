webpackJsonp([6],{"8BoE":function(e,t){},DC5m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Dd8w"),s=n.n(r),a=[{required:!0,message:"此为必填项",trigger:"blur"},{min:8,max:32,message:"长度在8到32个字符之间",trigger:"blur"}],i={components:{BottomButtonDialog:n("XF1/").a},data:function(){return{pwdObj:{originPwd:"",newPwd:"",confirmPwd:""},rules:{originPwd:[].concat(a),newPwd:[].concat(a),confirmPwd:[].concat(a,[{validator:this.confirmPwd(!0),trigger:["change","blur"]}])}}},props:{visible:{type:Boolean}},computed:{localVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},methods:{alterPassword:function(){var e=this;this.$refs.pwdForm.validate(function(t){if(!t||e.pwdObj.newPwd!==e.pwdObj.confirmPwd)return e.$message.error("格式错误!!"),!1;e.$emit("alter",e.pwdObj)})},confirmPwd:function(e){var t=this;return function(n,r,s){r!==(e?t.pwdObj.newPwd:t.pwdObj.confirmPwd)?s(new Error("两次输入密码不一致!")):s()}}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("bottom-button-dialog",{attrs:{title:"修改密码",visible:e.localVisible,width:"30%","confirm-button":"修改"},on:{"update:visible":function(t){e.localVisible=t},"on-confirm":e.alterPassword}},[n("el-form",{ref:"pwdForm",attrs:{model:e.pwdObj,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"原密码",prop:"originPwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.pwdObj.originPwd,callback:function(t){e.$set(e.pwdObj,"originPwd",t)},expression:"pwdObj.originPwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.pwdObj.newPwd,callback:function(t){e.$set(e.pwdObj,"newPwd",t)},expression:"pwdObj.newPwd"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"确  认",prop:"confirmPwd"}},[n("el-input",{attrs:{type:"password"},model:{value:e.pwdObj.confirmPwd,callback:function(t){e.$set(e.pwdObj,"confirmPwd",t)},expression:"pwdObj.confirmPwd"}})],1)],1)],1)],1)},staticRenderFns:[]};var l=n("VU/8")(i,o,!1,function(e){n("s8y+")},"data-v-585984df",null).exports,u={components:{UploadImage:n("wA58").a,AlterPassword:l},data:function(){return{userInfo:{},alterVisible:!1}},computed:{mineInfo:function(){return this.$store.state.manager.manager}},watch:{mineInfo:{handler:function(e){this.userInfo=s()({},e)},immediate:!0}},methods:{onImageChange:function(e){this.userInfo.headImg=e},showAlterPwd:function(){this.alterVisible=!0},alterPwd:function(e){var t=this;this.api.sysuser.alterPwd(e.originPwd,e.newPwd).commonThen(function(e,n){e&&n&&(t.$message("密码修改成功"),t.alterVisible=!1)},this)},reset:function(){this.userInfo=this.mineInfo},saveUser:function(){var e=this,t=this.userInfo;!t.isAgent||t.name?this.api.sysuser.updateUser(s()({userId:t.id},t,{isInValid:!1})).commonThen(function(t){t&&e.$message("保存成功")},this):this.$message.error("客户经理的名字不能为空")}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mine"},[n("el-row",[n("el-col",{attrs:{align:"right"}},[n("el-button",{attrs:{type:"text"},on:{click:e.showAlterPwd}},[e._v("修改密码")])],1)],1),e._v(" "),n("el-form",[n("el-form-item",{attrs:{align:"center"}},[n("upload-image",{attrs:{"cur-image":e.userInfo.headImg},on:{"on-image-change":e.onImageChange}})],1),e._v(" "),n("el-form",{attrs:{model:e.userInfo,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"登录名",prop:"username"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.userInfo.username,callback:function(t){e.$set(e.userInfo,"username",t)},expression:"userInfo.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"电话"}},[n("el-input",{model:{value:e.userInfo.phone,callback:function(t){e.$set(e.userInfo,"phone",t)},expression:"userInfo.phone"}})],1),e._v(" "),e.userInfo.isAgent?[n("el-row",[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:e.userInfo.name,callback:function(t){e.$set(e.userInfo,"name",t)},expression:"userInfo.name"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"性别"}},[n("el-select",{attrs:{placeholder:"请选择性别"},model:{value:e.userInfo.sex,callback:function(t){e.$set(e.userInfo,"sex",t)},expression:"userInfo.sex"}},[n("el-option",{attrs:{label:"未知",value:0}}),e._v(" "),n("el-option",{attrs:{label:"男",value:1}}),e._v(" "),n("el-option",{attrs:{label:"女",value:2}})],1)],1)],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"自我简介",prop:"des"}},[n("el-input",{attrs:{type:"textarea"},model:{value:e.userInfo.des,callback:function(t){e.$set(e.userInfo,"des",t)},expression:"userInfo.des"}})],1)]:e._e(),e._v(" "),n("el-form-item",{attrs:{align:"right"}},[n("el-button",{on:{click:e.reset}},[e._v("恢复")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v("保存")])],1)],2)],1),e._v(" "),n("alter-password",{attrs:{visible:e.alterVisible},on:{"update:visible":function(t){e.alterVisible=t},alter:e.alterPwd}})],1)},staticRenderFns:[]};var d=n("VU/8")(u,c,!1,function(e){n("JtwP")},"data-v-3f7fd33e",null);t.default=d.exports},JtwP:function(e,t){},"s8y+":function(e,t){},wA58:function(e,t,n){"use strict";var r={components:{HeadImage:n("cH51").a},data:function(){return{headers:{Authorization:this.$store.state.manager.token}}},props:{curImage:{type:String,default:""}},methods:{handleAvatarSuccess:function(e){var t=e;t.success&&this.$emit("on-image-change",t.data)}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-upload",{staticClass:"avatar-uploader",attrs:{"show-file-list":!1,action:this.api.baseURL+"/resource/file","on-success":this.handleAvatarSuccess,headers:this.headers}},[this.curImage?t("head-image",{staticClass:"avatar",attrs:{url:this.curImage}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1)],1)},staticRenderFns:[]};var a=n("VU/8")(r,s,!1,function(e){n("8BoE")},"data-v-ac550fee",null);t.a=a.exports}});
//# sourceMappingURL=6.eb229af6ac8e3c5fc78e.js.map